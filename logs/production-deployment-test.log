[0;34m[INFO][0m 2025-08-20 20:36:33 - 开始 WordPecker 生产环境部署测试...
[0;34m[INFO][0m 2025-08-20 20:36:33 - 检查 Sealos devbox 环境...
[1;33m[WARNING][0m 2025-08-20 20:36:33 - 可能不在 Sealos devbox 环境中
[0;34m[INFO][0m 2025-08-20 20:36:33 - 检查网络连接...
[0;32m[SUCCESS][0m 2025-08-20 20:36:36 - 网络连接正常
[0;34m[INFO][0m 2025-08-20 20:36:36 - 检查系统工具和服务...
[0;32m[SUCCESS][0m 2025-08-20 20:36:36 - 所有必要工具已安装
[0;34m[INFO][0m 2025-08-20 20:36:36 - 检查项目文件结构...
[0;31m[ERROR][0m 2025-08-20 20:36:36 - 缺少必要文件: backend/package.json
[0;34m[INFO][0m 2025-08-20 20:36:36 - 执行完整自动化部署流程...
[0;34m[INFO][0m 2025-08-20 20:36:36 - 停止现有服务...
[0;34m[INFO][0m 2025-08-20 20:36:36 - 运行完整自动化部署脚本...
[0;31m[ERROR][0m 2025-08-20 20:36:36 - 完整部署脚本不存在
[0;34m[INFO][0m 2025-08-20 20:36:36 - 验证服务持续运行能力...
[0;34m[INFO][0m 2025-08-20 20:36:36 - 验证云端独立运行能力...
[0;34m[INFO][0m 2025-08-20 20:36:36 - 初始服务启动时间: Thu Jan  1 08:00:00 CST 1970
[0;34m[INFO][0m 2025-08-20 20:36:36 - 持续监控服务状态 (5分钟)...
[0;34m[INFO][0m 2025-08-20 20:36:36 - 第 1/10 次检查...
[0;34m[INFO][0m 2025-08-20 20:36:36 - ✓ 后端服务正常
[1;33m[WARNING][0m 2025-08-20 20:36:36 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-20 20:36:36 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-20 20:37:06 - 第 2/10 次检查...
[0;34m[INFO][0m 2025-08-20 20:37:06 - ✓ 后端服务正常
[1;33m[WARNING][0m 2025-08-20 20:37:06 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-20 20:37:06 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-20 20:37:36 - 第 3/10 次检查...
[0;34m[INFO][0m 2025-08-20 20:37:36 - ✓ 后端服务正常
[1;33m[WARNING][0m 2025-08-20 20:37:36 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-20 20:37:36 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-20 20:38:06 - 第 4/10 次检查...
[0;34m[INFO][0m 2025-08-20 20:38:06 - ✓ 后端服务正常
[1;33m[WARNING][0m 2025-08-20 20:38:06 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-20 20:38:06 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-20 20:38:36 - 第 5/10 次检查...
[0;34m[INFO][0m 2025-08-20 20:38:36 - ✓ 后端服务正常
[1;33m[WARNING][0m 2025-08-20 20:38:36 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-20 20:38:37 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-20 20:39:07 - 第 6/10 次检查...
[0;34m[INFO][0m 2025-08-20 20:39:07 - ✓ 后端服务正常
[1;33m[WARNING][0m 2025-08-20 20:39:07 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-20 20:39:07 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-20 20:39:37 - 第 7/10 次检查...
[0;34m[INFO][0m 2025-08-20 20:39:37 - ✓ 后端服务正常
[1;33m[WARNING][0m 2025-08-20 20:39:37 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-20 20:39:37 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-20 20:40:07 - 第 8/10 次检查...
[0;34m[INFO][0m 2025-08-20 20:40:07 - ✓ 后端服务正常
[1;33m[WARNING][0m 2025-08-20 20:40:07 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-20 20:40:07 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-20 20:40:37 - 第 9/10 次检查...
[0;34m[INFO][0m 2025-08-20 20:40:37 - ✓ 后端服务正常
[1;33m[WARNING][0m 2025-08-20 20:40:37 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-20 20:40:37 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-20 20:41:07 - 第 10/10 次检查...
[0;34m[INFO][0m 2025-08-20 20:41:07 - ✓ 后端服务正常
[1;33m[WARNING][0m 2025-08-20 20:41:07 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-20 20:41:07 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-20 20:41:07 - 服务可用性: 100% (10/10)
[0;32m[SUCCESS][0m 2025-08-20 20:41:07 - 服务持续运行验证通过 (可用性: 100%)
[0;34m[INFO][0m 2025-08-20 20:41:07 - 测试自动故障恢复能力...
[0;34m[INFO][0m 2025-08-20 20:41:07 - 测试进程崩溃自动恢复...
[1;33m[WARNING][0m 2025-08-20 20:41:07 - 无法获取后端进程 PID，跳过崩溃测试
[0;34m[INFO][0m 2025-08-20 20:41:07 - 测试内存过载保护...
[1;33m[WARNING][0m 2025-08-20 20:41:08 - 内存限制配置缺失
[0;34m[INFO][0m 2025-08-20 20:41:08 - 测试数据库连接恢复...
[1;33m[WARNING][0m 2025-08-20 20:41:11 - 数据库连接状态: null
[0;32m[SUCCESS][0m 2025-08-20 20:41:11 - 故障恢复能力测试通过
[0;34m[INFO][0m 2025-08-20 20:41:11 - 测试远程管理功能...
[0;34m[INFO][0m 2025-08-20 20:41:11 - 测试服务状态查询 API...
[0;31m[ERROR][0m 2025-08-20 20:41:11 - 服务状态查询 API 异常
[0;34m[INFO][0m 2025-08-20 20:41:11 - 测试高可用性机制...
[0;34m[INFO][0m 2025-08-20 20:41:11 - 测试负载监控功能...
[1;33m[WARNING][0m 2025-08-20 20:41:11 - 高可用性状态 API 不可用
[0;34m[INFO][0m 2025-08-20 20:41:11 - 测试系统资源监控...
[1;33m[WARNING][0m 2025-08-20 20:41:11 - 系统指标 API 不可用
[0;34m[INFO][0m 2025-08-20 20:41:11 - 测试自动扩容触发...
[1;33m[WARNING][0m 2025-08-20 20:41:11 - 自动扩容 API 不可用
[0;32m[SUCCESS][0m 2025-08-20 20:41:11 - 高可用性机制测试通过
[0;34m[INFO][0m 2025-08-20 20:41:11 - 测试网络断开恢复能力...
[0;34m[INFO][0m 2025-08-20 20:41:11 - 测试外部 API 连接处理...
[1;33m[WARNING][0m 2025-08-20 20:41:12 - 外部 API 状态检查不可用
[0;34m[INFO][0m 2025-08-20 20:41:12 - 测试数据库连接恢复机制...
[1;33m[WARNING][0m 2025-08-20 20:41:12 - 数据库连接状态异常: null
[0;34m[INFO][0m 2025-08-20 20:41:12 - 测试前后端通信...
[1;33m[WARNING][0m 2025-08-20 20:41:12 - 前端页面加载异常
[0;32m[SUCCESS][0m 2025-08-20 20:41:12 - 前后端 API 通信正常
[0;32m[SUCCESS][0m 2025-08-20 20:41:12 - 网络恢复测试通过
[0;34m[INFO][0m 2025-08-20 20:41:12 - 测试系统级服务管理...
[0;34m[INFO][0m 2025-08-20 20:41:12 - 检查 Systemd 服务配置...
[1;33m[WARNING][0m 2025-08-20 20:41:12 - WordPecker systemd 服务未配置
[0;34m[INFO][0m 2025-08-20 20:41:12 - 检查 PM2 持久化配置...
[0;31m[ERROR][0m 2025-08-20 20:41:13 - PM2 进程未运行
[0;32m[SUCCESS][0m 2025-08-20 20:41:13 - 所有测试阶段完成！
[0;34m[INFO][0m 2025-08-20 20:41:13 - 生成测试报告...
[0;32m[SUCCESS][0m 2025-08-20 20:41:13 - 测试报告已生成: ./logs/production-test-results-20250820-203632.json
[0;34m[INFO][0m 2025-08-21 10:02:21 - 开始 WordPecker 生产环境部署测试...
[0;34m[INFO][0m 2025-08-21 10:02:21 - 检查 Sealos devbox 环境...
[1;33m[WARNING][0m 2025-08-21 10:02:21 - 可能不在 Sealos devbox 环境中
[0;34m[INFO][0m 2025-08-21 10:02:21 - 检查网络连接...
[0;32m[SUCCESS][0m 2025-08-21 10:02:23 - 网络连接正常
[0;34m[INFO][0m 2025-08-21 10:02:23 - 检查系统工具和服务...
[0;32m[SUCCESS][0m 2025-08-21 10:02:23 - 所有必要工具已安装
[0;34m[INFO][0m 2025-08-21 10:02:23 - 检查项目文件结构...
[0;32m[SUCCESS][0m 2025-08-21 10:02:23 - 项目文件结构完整
[0;34m[INFO][0m 2025-08-21 10:02:23 - 检查环境变量配置...
[0;32m[SUCCESS][0m 2025-08-21 10:02:23 - 后端环境变量文件存在
[0;32m[SUCCESS][0m 2025-08-21 10:02:23 - 数据库连接配置存在
[0;32m[SUCCESS][0m 2025-08-21 10:02:23 - OpenAI API 配置存在
[0;32m[SUCCESS][0m 2025-08-21 10:02:23 - 环境检查完成
[0;34m[INFO][0m 2025-08-21 10:02:23 - 执行完整自动化部署流程...
[0;34m[INFO][0m 2025-08-21 10:02:23 - 停止现有服务...
[0;34m[INFO][0m 2025-08-21 10:02:23 - 运行完整自动化部署脚本...
[0;32m[SUCCESS][0m 2025-08-21 10:03:44 - 完整部署流程执行成功
[0;34m[INFO][0m 2025-08-21 10:03:44 - 验证部署结果...
[0;31m[ERROR][0m 2025-08-21 10:03:54 - PM2 进程启动失败
[0;34m[INFO][0m 2025-08-21 10:03:54 - 验证服务持续运行能力...
[0;34m[INFO][0m 2025-08-21 10:03:54 - 验证云端独立运行能力...
[0;34m[INFO][0m 2025-08-21 10:03:54 - 初始服务启动时间: Thu Jan  1 08:00:00 CST 1970
[0;34m[INFO][0m 2025-08-21 10:03:54 - 持续监控服务状态 (5分钟)...
[0;34m[INFO][0m 2025-08-21 10:03:54 - 第 1/10 次检查...
[1;33m[WARNING][0m 2025-08-21 10:03:54 - ✗ 后端服务异常
[1;33m[WARNING][0m 2025-08-21 10:03:54 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-21 10:03:55 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-21 10:04:25 - 第 2/10 次检查...
[1;33m[WARNING][0m 2025-08-21 10:04:25 - ✗ 后端服务异常
[1;33m[WARNING][0m 2025-08-21 10:04:25 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-21 10:04:25 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-21 10:04:55 - 第 3/10 次检查...
[1;33m[WARNING][0m 2025-08-21 10:04:55 - ✗ 后端服务异常
[1;33m[WARNING][0m 2025-08-21 10:04:55 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-21 10:04:55 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-21 10:05:25 - 第 4/10 次检查...
[1;33m[WARNING][0m 2025-08-21 10:05:25 - ✗ 后端服务异常
[1;33m[WARNING][0m 2025-08-21 10:05:25 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-21 10:05:25 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-21 10:05:55 - 第 5/10 次检查...
[1;33m[WARNING][0m 2025-08-21 10:05:55 - ✗ 后端服务异常
[1;33m[WARNING][0m 2025-08-21 10:05:55 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-21 10:05:55 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-21 10:06:25 - 第 6/10 次检查...
[1;33m[WARNING][0m 2025-08-21 10:06:25 - ✗ 后端服务异常
[1;33m[WARNING][0m 2025-08-21 10:06:25 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-21 10:06:25 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-21 10:06:55 - 第 7/10 次检查...
[1;33m[WARNING][0m 2025-08-21 10:06:55 - ✗ 后端服务异常
[1;33m[WARNING][0m 2025-08-21 10:06:55 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-21 10:06:55 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-21 10:07:25 - 第 8/10 次检查...
[1;33m[WARNING][0m 2025-08-21 10:07:25 - ✗ 后端服务异常
[1;33m[WARNING][0m 2025-08-21 10:07:25 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-21 10:07:25 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-21 10:07:55 - 第 9/10 次检查...
[1;33m[WARNING][0m 2025-08-21 10:07:55 - ✗ 后端服务异常
[1;33m[WARNING][0m 2025-08-21 10:07:55 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-21 10:07:56 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-21 10:08:26 - 第 10/10 次检查...
[1;33m[WARNING][0m 2025-08-21 10:08:26 - ✗ 后端服务异常
[1;33m[WARNING][0m 2025-08-21 10:08:26 - ✗ 前端服务异常
[0;34m[INFO][0m 2025-08-21 10:08:26 - 在线进程数: 0
[0;34m[INFO][0m 2025-08-21 10:08:26 - 服务可用性: 0% (0/10)
[0;31m[ERROR][0m 2025-08-21 10:08:26 - 服务持续运行验证失败 (可用性: 0%)
[0;34m[INFO][0m 2025-08-21 10:08:26 - 测试自动故障恢复能力...
[0;34m[INFO][0m 2025-08-21 10:08:26 - 测试进程崩溃自动恢复...
[1;33m[WARNING][0m 2025-08-21 10:08:26 - 无法获取后端进程 PID，跳过崩溃测试
[0;34m[INFO][0m 2025-08-21 10:08:26 - 测试内存过载保护...
[1;33m[WARNING][0m 2025-08-21 10:08:26 - 内存限制配置缺失
[0;34m[INFO][0m 2025-08-21 10:08:26 - 测试数据库连接恢复...
[1;33m[WARNING][0m 2025-08-21 10:08:26 - 数据库连接状态: 
[0;32m[SUCCESS][0m 2025-08-21 10:08:26 - 故障恢复能力测试通过
[0;34m[INFO][0m 2025-08-21 10:08:26 - 测试远程管理功能...
[0;34m[INFO][0m 2025-08-21 10:08:26 - 测试服务状态查询 API...
[0;31m[ERROR][0m 2025-08-21 10:08:26 - 服务状态查询 API 异常
[0;34m[INFO][0m 2025-08-21 10:08:26 - 测试高可用性机制...
[0;34m[INFO][0m 2025-08-21 10:08:26 - 测试负载监控功能...
[1;33m[WARNING][0m 2025-08-21 10:08:26 - 高可用性状态 API 不可用
[0;34m[INFO][0m 2025-08-21 10:08:26 - 测试系统资源监控...
[1;33m[WARNING][0m 2025-08-21 10:08:26 - 系统指标 API 不可用
[0;34m[INFO][0m 2025-08-21 10:08:26 - 测试自动扩容触发...
[1;33m[WARNING][0m 2025-08-21 10:08:26 - 自动扩容 API 不可用
[0;32m[SUCCESS][0m 2025-08-21 10:08:26 - 高可用性机制测试通过
[0;34m[INFO][0m 2025-08-21 10:08:26 - 测试网络断开恢复能力...
[0;34m[INFO][0m 2025-08-21 10:08:26 - 测试外部 API 连接处理...
[1;33m[WARNING][0m 2025-08-21 10:08:26 - 外部 API 状态检查不可用
[0;34m[INFO][0m 2025-08-21 10:08:26 - 测试数据库连接恢复机制...
[1;33m[WARNING][0m 2025-08-21 10:08:26 - 数据库连接状态异常: 
[0;34m[INFO][0m 2025-08-21 10:08:26 - 测试前后端通信...
[1;33m[WARNING][0m 2025-08-21 10:08:26 - 前端页面加载异常
[1;33m[WARNING][0m 2025-08-21 10:08:26 - 前后端 API 通信异常
[0;32m[SUCCESS][0m 2025-08-21 10:08:26 - 网络恢复测试通过
[0;34m[INFO][0m 2025-08-21 10:08:26 - 测试系统级服务管理...
[0;34m[INFO][0m 2025-08-21 10:08:26 - 检查 Systemd 服务配置...
[1;33m[WARNING][0m 2025-08-21 10:08:26 - WordPecker systemd 服务未配置
[0;34m[INFO][0m 2025-08-21 10:08:26 - 检查 PM2 持久化配置...
[0;31m[ERROR][0m 2025-08-21 10:08:26 - PM2 进程未运行
[0;32m[SUCCESS][0m 2025-08-21 10:08:26 - 所有测试阶段完成！
[0;34m[INFO][0m 2025-08-21 10:08:26 - 生成测试报告...
[0;32m[SUCCESS][0m 2025-08-21 10:08:27 - 测试报告已生成: ./logs/production-test-results-20250821-100221.json
